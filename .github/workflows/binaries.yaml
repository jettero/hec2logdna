
name: binaries

on:
  workflow_call:
    inputs: {}
  workflow_dispatch:
    inputs: {}

jobs:
  build:

    strategy:
      matrix:
        platform:
          - os: ubuntu-18.04
            ar: linux-x86_64

    runs-on: ${{ matrix.platform.os }}

    steps:
    - uses: actions/checkout@v2

    - uses: actions/setup-python@v3
      with:
        python-version: '3.9'

    - id: install-things
      run: pip install -Ur bin-requirements.txt

    - id: pyinstaller
      run: pyinstaller --specpath contrib/ --onedir --noconfirm --log-level INFO ./sj2l.py

    - uses: actions/upload-artifact@v3
      with:
        name: sj2l-${{ matrix.platform.ar }}
        path: dist/sj2l
